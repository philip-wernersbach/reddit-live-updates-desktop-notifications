(function(a){function e(){}function f(a){return a&&a.constructor===Object}function k(a){return a&&a.constructor===String}function n(a){return a&&a.constructor===Function}function t(b,c){var d;a.Notification?d=new a.Notification(b,{icon:k(c.icon)?c.icon:c.icon.u,body:c.body||p,tag:c.tag||p}):a.webkitNotifications?(d=a.webkitNotifications.createNotification(c.icon,b,c.body),d.show()):navigator.e?(d=navigator.e.createNotification(b,c.body,c.icon),d.show()):a.external&&a.external.b()&&(a.external.o(),
a.external.s(k(c.icon)?c.icon:c.icon.t,b),a.external.r(),d={ieVerification:q+1});return d}function u(b){return{close:function(){b&&(b.close?b.close():a.external&&a.external.b()&&b.m===q&&a.external.o())}}}function r(){var b;if(l)return a.Notification&&a.Notification.f?b=a.Notification.f():a.webkitNotifications&&a.webkitNotifications.checkPermission?b=v[a.webkitNotifications.checkPermission()]:navigator.e?b=h:a.Notification&&a.Notification.permission?b=a.Notification.permission:a.external&&void 0!==
a.external.b()&&(b=a.external.b()?h:m),b}var m="default",h="granted",v=[h,m,"denied"],s={},p="",l=function(){var b=!1;try{b=!!(a.Notification||a.webkitNotifications||navigator.e||a.external&&void 0!==a.external.b())}catch(c){}return b}(),q=Math.floor(10*Math.random()+1),g={p:!1,h:0};a.notify={j:m,k:h,PERMISSION_DENIED:"denied",isSupported:l,q:function(a){if(a&&f(a)){var c,d;for(c in a)d=a[c],c in g&&(g[c]===d||c in s&&s[c]===d)||(g[c]=d)}return g},createNotification:function(b,c){var d,e;l&&(g.p?
document.hidden||document.msHidden||document.mozHidden||document.webkitHidden:1)&&k(b)&&c&&(k(c.icon)||f(c.icon))&&r()===h&&(d=t(b,c));e=u(d);g.h&&d&&!d.m&&d.addEventListener&&d.addEventListener("show",function(){a.setTimeout(function(){e.close()},g.h)});return e},f:r,requestPermission:function(b){l&&(b=n(b)?b:e,a.webkitNotifications&&a.webkitNotifications.checkPermission?a.webkitNotifications.requestPermission(b):a.Notification&&a.Notification.requestPermission&&a.Notification.requestPermission(b))}};
n(Object.seal)&&Object.seal(a.notify)})(window);
(function(){var a;a={g:1E4,n:function(){this.a=$("#liveupdate-title").text();this.i=$(".liveupdate-listing .initial");this.c=$('<span style="width: 0; height: 0; display: none;"></span>');if(!this.i)return alert("RedditLiveUpdatesDesktopNotifications can't find the initial element!"),!1;if(!this.a)return alert("RedditLiveUpdatesDesktopNotifications can't find the title!"),!1;this.a="Live Updates: "+this.a;return!0},l:function(){var e;e=a.c.prev();if(e.hasClass("initial"))return null;a.c.remove();
e.before(a.c);return e.find("p").text()},d:function(){var e;return(e=a.l())?(notify.createNotification(a.a,{body:e,icon:"/favicon.ico"}),a.d()):setTimeout(a.d,a.g)},start:function(){var e,f;e=notify.f();return e===notify.k?(this.i.after(this.c),setTimeout(a.d,a.g)):e===notify.j?(f=$('<div style="position:fixed; top: 0; left: 0; z-index: 254; width: 100%; height: 100%;"><input type="button" style="width: 100%; height: 100%;" value="Click To Activate Desktop Notifications!"></input></div>'),f.click(function(){f.remove();
return notify.requestPermission(a.start)}),f.appendTo("body")):alert("RedditLiveUpdatesDesktopNotifications needs permission to post notifications!")}};a.n()&&a.start()}).call(this);
